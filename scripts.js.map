{"version":3,"sources":["src/Route.js","src/Map.js","src/Tracker.js"],"names":[],"mappings":"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","file":"scripts.js","sourcesContent":["var Route = (function() {\n\t\n\tvar getStopData = function() {\n\n\t};\n\n\tvar getRouteLineData = function() {\n\n\t};\n\n\tvar getBusData = function() {\n\n\t};\n\n\tvar updateBuses = function() {\n\n\t};\n\n\n\treturn {\n\t\tupdateBuses: updateBuses,\n\t\tgetBuses: getBuses,\n\t\tgetRouteLine: getRouteLine,\n\t\tgetStops: getStops,\n\n\t};\n\n})();","var Map = (function() {\n\n\tvar map, canvas, intervalID;\n\tvar defaults = {\n\t\tupdateInterval: 5000,\n\t\tcontrolsPosition: 'bottom-left',\n\t\tzoom: 10.5\n\t};\n\tvar routes = {};\n\tvar layerIDs = {\n\t\tbuses: [],\n\t\tstops: [],\n\t\thover: [],\n\t\tlines: []\n\t};\n\n\tvar init = function() {\t    \t\t\n\t\tmap = new mapboxgl.Map({\n\t        container: 'map',\n\t        style: 'mapbox://styles/jeancochrane/ciqe4lxnb0002cem7a4vd0dhb',\n\t        center: [-75.156133, 39.944918], //philly!\n\t        zoom: defaults.zoom\n\t    });\n\t\tmap.on('load', setupMap);\n\t\tintervalID = setInterval(updateRoutes, updateInterval);\n\t};\n\n\tvar showMap = function() {\n\t\t$(map.getContainer()).show();\n\t\t//Must be called when changing map display\n\t\tmap.resize();\n\t};\n\n    var setupMap = function() {\n    \t//Add zoom/rotation controls\n        map.addControl(new mapboxgl.Navigation({position: defaults.controlsPosition}));\n        bindMapFunctions();\n        //Cache map canvas HTMLobject\n        canvas = map.getCanvas();\n    };\n\n    //Bind functions to map events\n    var bindMapFunctions = function() {\n    \t//Display information about buses and stops on click\n    \tmap.on(click, function(e) {\n    \t\tvar buses = getFeatures(e.point, layerIDs.buses);\n\n\t        if (buses.length) {\n\t        \tdisplayBusInfo(buses[0]);\n\t        } else {\n\t        \tvar stops = getFeatures(e.point, layerIDs.stops);\n\n\t        \tif (stops.length) {\n\t        \t\tdisplayStopInfo(stops[0]);\n\t        \t}\n\t        }\n\n    \t});\n        \n        map.on('mousemove', function(e) {\n        \tvar buses = getFeatures(e.point, layerIDs.buses);\n        \tvar stops = getFeatures(e.point, layerIDs.stops);\n\n        \t//Change cursor to pointer over bus or stop\n        \tcanvas.style.cursor = (buses.length || stops.length) ? 'pointer' : '';\n\n        \t//Add hover effect for stops\n        \tif (stops.length) {\n        \t\tvar stop = stop[0];\n        \t\tmap.setFilter(stop.hoverLayer, [\"==\", \"ID\", stop.properties.ID]);\n        \t} else {\n        \t\t$.each(layerIDs.hover, function(layer) {\n        \t\t\tmap.setFilter(layer, [\"==\", \"ID\", \"\"]);\t\n        \t\t});\n        \t}\n        });\n\n    };\n\n    var getFeatures = function(point,layers) {\n    \treturn map.queryRenderedFeatures(point, {layers: layers});\n    };\n\n    var displayStopInfo = function(stop) {\n        var popup = new mapboxgl.Popup()\n\t        .setLngLat(stop.geometry.coordinates)\n\t        //HTML controlling bus information popup\n\t        .setHTML(\n\t            \"<h3>\" + stop.properties.stopname + \"</h3>\" +\n\t            \"Stop #\" + stop.properties.stopid + \"<br>\" +\n\t            \"Route: \" + stop.properties.route\n\t        )\n\t        .addTo(map);\n\n    };\n\n    var displayBusInfo = function(bus) {\n        var popup = new mapboxgl.Popup()\n            .setLngLat(bus.geometry.coordinates)\n            //HTML controlling bus information popup\n            .setHTML(\n                \"<h1>Route #\" + bus.properties.route + \"</h1>\" +\n                \"Direction: <i>\" + bus.properties.direction + \"</i><br>\" +\n                \"Destination: <i>\" + bus.properties.destination + \"</i><br><br>\" +\n                \"Last updated \" + format_time(bus.properties.last_updated) + \" seconds ago\" \n            )\n            .addTo(map);\n\n    };\n\n    function formatTime(str) {\n\t//stub for a time formatting function which takes a string with the number of seconds since last update\n\treturn str;\n\t}\n\n    var updateRoutes = function() {\n\n    };\n\n    var addRoute = function(route) {\n\n    };\n\n    var removeRoute = function(route) {\n\n    };\n\n    var clearAllRoutes = function() {\n\n    };\n\n    var hideStops = function() {\n\n    };\n\n    var setUpdateInterval = function(interval) {\n    \tclearInterval(intervalID);\n    \tintervalID = setInterval(interval, updateRoutes);\n    }; \n\n    return {\n\n    \tclearAllRoutes: clearAllRoutes,\n    \thideStops: hideStops,\n    \tshowStops: showStops,\n    \tsetUpdateInterval: setUpdateInterval,\n    \tshowMap: showMap,\n    \taddRoute: addRoute,\n    \tremoveRoute: removeRoute,\n    \tinit: init\n\t};\n\n})();","var Tracker = (function() {\n\tvar map;\n\t\n\tvar bindFunctions = function() {\n\n\t};\n\n\tvar init = function() {\n\t\tmap = Map.init();\n\t\tbindFunctions();\n\t};\n\n\treturn {\n\t\tinit: init\n\t};\n\n})();\n\n\n$(function() {\n\tTracker.init();\n});\n"]}